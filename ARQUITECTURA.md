# ğŸ—ï¸ ARQUITECTURA DE LA APLICACIÃ“N

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                  SISTEMA DE INVENTARIO LOCAL - ARQUITECTURA                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CAPA DE INTERFAZ (interfaz.py)                      â”‚
â”‚                              GUI - tkinter                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚                    VENTANA DE LOGIN                              â”‚      â”‚
â”‚  â”‚  Usuario: [________] ContraseÃ±a: [________] [Ingresar]          â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                â†“                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚              APLICACIÃ“N PRINCIPAL (5 PESTAÃ‘AS)                  â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚                                                                   â”‚      â”‚
â”‚  â”‚ [ğŸ“¦ Productos] [ğŸ“¥ Entradas] [ğŸ“¤ Salidas] [ğŸ§¾ Facturas] [ğŸ“Š Rep]â”‚      â”‚
â”‚  â”‚                                                                   â”‚      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚      â”‚
â”‚  â”‚  â”‚  PESTAÃ‘A ACTIVA (Contenido dinÃ¡mico)                      â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  - Formularios de entrada                                 â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  - Tablas de datos                                        â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  - Botones de acciÃ³n                                      â”‚   â”‚      â”‚
â”‚  â”‚  â”‚                                                             â”‚   â”‚      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CAPA DE LÃ“GICA (logica.py)                            â”‚
â”‚                     Clase: LogicaInventario                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ AutenticaciÃ³nâ”‚  â”‚   Productos  â”‚  â”‚   Entradas   â”‚  â”‚   Salidas   â”‚   â”‚
â”‚  â”‚  - login()   â”‚  â”‚  - crear()   â”‚  â”‚  - registrarâ”‚  â”‚  -registrar â”‚   â”‚
â”‚  â”‚  - logout()  â”‚  â”‚  - obtener() â”‚  â”‚  - obtener()â”‚  â”‚  -obtener() â”‚   â”‚
â”‚  â”‚- get_usuario â”‚  â”‚  - bajo_stockâ”‚  â”‚             â”‚  â”‚             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚    Facturas  â”‚  â”‚   Reportes   â”‚  â”‚  Validacionesâ”‚                    â”‚
â”‚  â”‚  - crear()   â”‚  â”‚  - ventas()  â”‚  â”‚  - verificar â”‚                    â”‚
â”‚  â”‚  - agregar   â”‚  â”‚  - productos â”‚  â”‚  - calcular  â”‚                    â”‚
â”‚  â”‚  - obtener() â”‚  â”‚  - stats()   â”‚  â”‚             â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CAPA DE DATOS (database.py)                             â”‚
â”‚                  Clase: DatabaseManager - SQLite                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   USUARIOS   â”‚  â”‚   PRODUCTOS  â”‚  â”‚   ENTRADAS   â”‚  â”‚   SALIDAS   â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ id (PK)      â”‚  â”‚ id (PK)      â”‚  â”‚ id (PK)      â”‚  â”‚ id (PK)     â”‚   â”‚
â”‚  â”‚ usuario      â”‚  â”‚ nombre       â”‚  â”‚ producto_id  â”‚  â”‚ producto_id â”‚   â”‚
â”‚  â”‚ contraseÃ±a   â”‚  â”‚ precio       â”‚  â”‚ cantidad     â”‚  â”‚ cantidad    â”‚   â”‚
â”‚  â”‚ nombre       â”‚  â”‚ stock        â”‚  â”‚ precio_unit  â”‚  â”‚ precio_unit â”‚   â”‚
â”‚  â”‚ email        â”‚  â”‚ stock_minimo â”‚  â”‚ proveedor    â”‚  â”‚ cliente     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ fecha        â”‚  â”‚ fecha       â”‚   â”‚
â”‚                                      â”‚ usuario_id   â”‚  â”‚ factura_id  â”‚   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”‚   FACTURAS   â”‚                                                          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ id (PK)      â”‚                     â”‚  RELACIONES (FK)         â”‚        â”‚
â”‚  â”‚ numero       â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
â”‚  â”‚ fecha        â”‚                     â”‚ producto_id â†’ productos  â”‚        â”‚
â”‚  â”‚ cliente_nombre                   n â”‚ usuario_id â†’ usuarios    â”‚        â”‚
â”‚  â”‚ cliente_nit  â”‚                     â”‚ factura_id â†’ facturas    â”‚        â”‚
â”‚  â”‚ subtotal     â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  â”‚ iva_valor    â”‚                                                          â”‚
â”‚  â”‚ total        â”‚                                                          â”‚
â”‚  â”‚ estado       â”‚                                                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                          â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
                    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                    â•‘   inventario.db (SQLite)              â•‘
                    â•‘   - Almacenamiento persistente        â•‘
                    â•‘   - Compartible entre usuarios        â•‘
                    â•‘   - Sin servidor requerido            â•‘
                    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸ“‹ FLUJO DE DATOS

```
USUARIO INTERACTÃšA CON INTERFAZ
            â†“
    INTERFAZ (interfaz.py)
    - Captura datos del usuario
    - Valida entrada bÃ¡sica
    - Llama mÃ©todos de LogicaInventario
            â†“
    LÃ“GICA (logica.py)
    - Valida reglas de negocio
    - Calcula valores
    - Coordina operaciones
    - Llama DatabaseManager
            â†“
    BASE DE DATOS (database.py)
    - Conecta a SQLite
    - Ejecuta queries
    - Retorna datos
            â†“
    INVENTARIO.DB
    - Almacena/Recupera datos
            â†“
    RESPUESTA REGRESA A INTERFAZ
    - Actualiza tablas
    - Muestra mensajes
    - Permite siguiente acciÃ³n
```

---

## ğŸ”„ EJEMPLO: GENERAR UNA FACTURA

```
1. USUARIO ENTRA EN PESTAÃ‘A FACTURAS
   â””â”€â†’ Interfaz muestra formulario

2. USUARIO COMPLETA DATOS:
   â””â”€â†’ Nombre cliente: "Juan PÃ©rez"
   â””â”€â†’ NIT: "1234567890"
   â””â”€â†’ Clic en "Nueva Factura"

3. INTERFAZ VALIDA Y LLAMA:
   factura_id = logica.crear_nueva_factura(
       "Juan PÃ©rez", "1234567890", ...
   )

4. LOGICA LLAMA DATABASE:
   factura_id = db.crear_factura(
       cliente_nombre="Juan PÃ©rez",
       cliente_nit="1234567890",
       usuario_id=1
   )

5. DATABASE EJECUTA SQL:
   INSERT INTO facturas (numero_factura, cliente_nombre, ...)
   VALUES ('FAC-20260126-000001', 'Juan PÃ©rez', ...)

6. DATABASE RETORNA factura_id = 5

7. LOGICA RETORNA factura_id = 5

8. INTERFAZ MUESTRA:
   "âœ“ Factura creada: 5"
   â””â”€â†’ Permite agregar productos

9. USUARIO AGREGA PRODUCTOS:
   â””â”€â†’ Selecciona producto
   â””â”€â†’ Ingresa cantidad
   â””â”€â†’ Clic "Agregar a Factura"

10. REPITE PASOS 3-8 PARA CADA PRODUCTO

11. USUARIO VISUALIZA FACTURA:
    logica.generar_resumen_factura(5)
    â””â”€â†’ Obtiene datos factura + items
    â””â”€â†’ Calcula totales
    â””â”€â†’ Retorna resumen

12. INTERFAZ MUESTRA FACTURA EN PANTALLA
    â””â”€â†’ Usuario puede exportar TXT/HTML
```

---

## ğŸ¯ VENTAJAS DE ESTA ARQUITECTURA

### Capa de Interfaz
âœ… Separada de la lÃ³gica  
âœ… FÃ¡cil de cambiar (tkinter â†’ PyQt, Web, etc.)  
âœ… Solo responsable de UI  

### Capa de LÃ³gica
âœ… Reutilizable desde diferentes interfaces  
âœ… Reglas de negocio centralizadas  
âœ… FÃ¡cil de testear  
âœ… Independiente de la BD  

### Capa de Datos
âœ… Cambio de BD sin afectar lÃ³gica (MySQL, PostgreSQL)  
âœ… Consultas optimizadas en un lugar  
âœ… Transacciones controladas  
âœ… Seguridad centralizada  

---

## ğŸ“Š ESTADÃSTICAS

| Aspecto | Valor |
|---------|-------|
| LÃ­neas de cÃ³digo | ~1500+ |
| MÃ©todos en LogicaInventario | 25+ |
| MÃ©todos en DatabaseManager | 20+ |
| Tablas en BD | 5 |
| PestaÃ±as en GUI | 5 |
| Funcionalidades | 30+ |

---

## ğŸ” SEGURIDAD

| Nivel | Implementado | Futuro |
|-------|-------------|--------|
| Usuario/ContraseÃ±a | âœ… | EncriptaciÃ³n bcrypt |
| SQLite Transacciones | âœ… | AuditorÃ­a de cambios |
| ValidaciÃ³n datos | âœ… | Roles y permisos |
| InyecciÃ³n SQL | âœ… (Parametrizado) | 2FA |

---

## ğŸš€ PRÃ“XIMAS FASES

**FASE 2**: IntegraciÃ³n DIAN  
**FASE 3**: Acceso multi-usuario en red  
**FASE 4**: SincronizaciÃ³n en la nube  
**FASE 5**: AplicaciÃ³n mÃ³vil  

---

*Arquitectura escalable, mantenible y profesional para una PYME* ğŸ¯
